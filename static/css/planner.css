/* static/css/planner.css */

.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

.btn-base {
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 9999px; padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 600;
  border: 1px solid rgba(0,0,0,0.05); background: #fff;
  box-shadow: 0 1px 1px rgba(0,0,0,0.04);
  transition: box-shadow 150ms ease, transform 100ms ease, opacity 150ms ease;
}
.btn-base:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
.btn-base:active { transform: scale(0.98); }
.btn-base:disabled { opacity: 0.4; pointer-events: none; }

#viewport { width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); scroll-padding-left: 50vw; scroll-padding-right: 50vw; }
.edge-pad { flex: 0 0 50vw; }

.card-li { flex: 0 0 calc((100% - 2 * 1.5rem) / 3); }
@media (max-width: 1024px) { .card-li { flex-basis: calc((100% - 1.5rem) / 2); } }
@media (max-width: 640px)  { .card-li { flex-basis: 90%; } }

.card {
  border-radius: 1rem;
  border: 1px solid #e5e7eb;
  background: linear-gradient(180deg,#ffffff 0%,#fafcff 100%);
  box-shadow: 0 1px 2px rgba(0,0,0,0.04), 0 8px 24px rgba(0,0,0,0.06);
  transition: transform 300ms ease, box-shadow 300ms ease, outline 200ms ease;
}
.card-selected {
  outline: 3px solid rgba(59,130,246,0.30);
  box-shadow:
    0 1px 2px rgba(0,0,0,0.04),
    0 8px 24px rgba(0,0,0,0.06),
    0 0 0 6px rgba(59,130,246,0.08);
}

.semester-body { --row: 56px; --gap: 12px; --pad-bottom: 16px; }
.semester-list { display: grid; grid-auto-rows: var(--row); row-gap: var(--gap); }
.semester-card-minh { min-height: calc((var(--row) * 8) + (var(--gap) * 7) + 64px + var(--pad-bottom)); }

.class-chip {
  display: flex; align-items: center; justify-content: space-between;
  height: var(--row);
  border-radius: 0.75rem; border: 1px solid rgba(0,0,0,0.05);
  background: #fff; padding: 0 1rem;
  box-shadow: 0 1px 1px rgba(0,0,0,0.04);
  transition: box-shadow 150ms ease, transform 100ms ease, opacity 150ms ease;
}
.class-chip:hover { box-shadow: 0 6px 14px rgba(0,0,0,0.08); }

.chip-text { overflow: hidden; }
.chip-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: clamp(140px, 22vw, 280px); }
.chip-sub   { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: clamp(140px, 22vw, 280px); }

.drop-ok { box-shadow: inset 0 0 0 3px rgba(59,130,246,0.35); transform: translateZ(0); }

/* ---------- Modal layout ---------- */
.modal-panel {
  width: min(900px, 92vw);
  height: min(720px, 92vh);
  display: grid;
  grid-template-rows: auto 1fr auto;
  min-height: 0;
}
.modal-header { min-height: 0; }
.modal-footer { min-height: 0; }
.modal-body, .body { min-height: 0; overflow: hidden; display: block; }

.results-scroll {
  height: 100%;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 160px;
  -webkit-overflow-scrolling: touch;
}

/* Distinguish modal-group background */
.modal-group { background: #f8fafc; }

/* Sticky group header */
.modal-group-header { position: sticky; top: 0; z-index: 20; background: inherit; }

/* ===== Enforce 3-column grid for class cards (default) ===== */
.results-scroll .modal-group .modal-group-body .modal-grid {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 0.5rem !important;
  align-items: stretch !important;
}
@media (max-width: 1024px) {
  .results-scroll .modal-group .modal-group-body .modal-grid {
    grid-template-columns: repeat(2, minmax(0,1fr)) !important;
  }
}
@media (max-width: 640px) {
  .results-scroll .modal-group .modal-group-body .modal-grid {
    grid-template-columns: 1fr !important;
  }
}

/* Ensure grid items don't force full width */
.modal-grid > .modal-card {
  width: auto !important;
  max-width: 100% !important;
  grid-column: auto !important;
  height: 100%;
}

/* ----- Card state backgrounds (order matters; keep after generic) ----- */
.modal-card { background: #ffffff !important; border: 1px solid #e5e7eb; }
.modal-card.is-planned  { background: #ecfdf5 !important; border-color: #10b981 !important; } /* green-50 */
.modal-card.is-blocked  { background: #fefce8 !important; border-color: #f59e0b !important; } /* yellow-50 */
.modal-card.is-available{ background: #ffffff !important; border-color: #e5e7eb !important; }

/* Title two-line clamp */
.two-line-title{
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
  max-height: 3.1em;
}

/* Offered row padding */
.offered-row { padding-bottom: 0.5rem; }

/* Yellow prereq box â€“ fixed height & fixed width 322px */
.prereq-box {
  width: 322px;
  max-width: 100%;
  min-height: 26px;
  font-size: 11px;
  display: flex;
  align-items: flex-start;
  gap: 0.25rem;
  border-radius: 0.25rem;
  padding: 0.25rem 0.5rem;
}
.prereq-box.warn { background: #fefce8; border: 1px solid #fde68a; color: #92400e; }
.prereq-box.spacer { visibility: hidden; border: 1px solid transparent; }

/* Progress widget in group headers (counter + bar) */
.modal-group-header { gap: 0.5rem; }
.modal-group-header .group-progress {
  display: flex; align-items: center; gap: 0.5rem; margin-left: auto;
}
.modal-group-header .group-progress-bar {
  width: 160px; height: 6px; border-radius: 9999px; background: #e5e7eb; overflow: hidden;
}
.modal-group-header .group-progress-fill {
  height: 100%; background: #22c55e; width: 0%;
}
.modal-group-header .group-progress-text { min-width: 42px; text-align: right; font-size: 12px; }
